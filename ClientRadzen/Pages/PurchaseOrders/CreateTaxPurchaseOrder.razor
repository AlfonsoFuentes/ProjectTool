@page "/CreateTaxPurchaseOrder/{BudgetItemId:guid}"

<PageTitle>Create New Purchase Order For Taxes</PageTitle>
@if (debug)
{

}
@if (Model != null)
{
    <RadzenStack Orientation="Orientation.Vertical">
        <RadzenRow>
            <RadzenText TextStyle="TextStyle.DisplayH5"
                        Text="@($"Create Tax PO in {Model.MWOCECName} {Model.MWOName} with Main Budget {Model.MainBudgetItem.Name}")"></RadzenText>
        </RadzenRow>
        <EditForm Model="@Model" OnValidSubmit="SaveAsync">
            <FluentValidationValidator @ref="_fluentValidationValidator" />
            <RadzenRow>
                <RadzenColumn Size="12" SizeMD="4">
                    <RadzenRow>
                        <RadzenFormField Text="Purchase order Name" Style="width: 100%;">
                            <RadzenTextBox @bind-Value=@Model.Name class="w-100"
                                           @oninput="@((arg)=>ChangeName(arg.Value!.ToString()!))"
                                           Name="name" />

                        </RadzenFormField>
                        <ValidationMessage For="() => Model.Name" style="color:red; font-size:x-small;" />

                    </RadzenRow>
                    <RadzenRow class="rz-mt-2">
                        <RadzenFormField Text="PO Number" Style="width: 100%;">

                            <RadzenTextBox Value=@Model.PONumber class="w-100" Style="width: 100%;"
                                           Name="ponumber" @oninput="@((arg)=>ChangePOnumber(arg.Value!.ToString()!))" />
                        </RadzenFormField>
                        <ValidationMessage For="() => Model.PONumber" style="color:red; font-size:x-small;" />

                    </RadzenRow>
                    <RadzenRow>
                        <RadzenFormField Text="MWO" Style="width: 100%;">

                            <RadzenTextBox Value=@Model.MWOCECName class="w-100" Style="width: 100%;"
                                           Name="account" Disabled=true />
                        </RadzenFormField>
                    </RadzenRow>


                    <RadzenRow>
                        <RadzenFormField Text="PO Value, COP" Style="width: 100%;">
                            <RadzenNumeric ShowUpDown=false @bind-Value=@Model.PurchaseOrderItem.QuoteCurrencyValue
                                           @oninput="@((arg)=>ChangeCurrencyValue(Model.PurchaseOrderItem, arg.Value!.ToString()!))"></RadzenNumeric>

                        </RadzenFormField>
                        <ValidationMessage For="() => Model.SumPOValueUSD" style="color:red; font-size:x-small;" />
                    </RadzenRow>

                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="4">
                    <RadzenCard>

                        <RadzenRow class="rz-mt-2">
                            <RadzenColumn Size="12" SizeMD="12">
                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">Budget, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.SumBudget)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>
                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">Assigned, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.SumBudgetAssigned)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>
                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">PO Value, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.SumPOValueUSD)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>
                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">Actual, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.SumActualUSD)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>


                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">Pending, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.SumPendingUSD)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>


                            </RadzenColumn>

                        </RadzenRow>

                    </RadzenCard>

                </RadzenColumn>
            </RadzenRow>
            <RadzenRow class="rz-mt-2">
                <RadzenColumn Size="12" SizeMD="4">
                    <RadzenRow JustifyContent="JustifyContent.SpaceBetween">
                        <RadzenButton Click="@SaveAsync" Variant="Variant.Flat" Text="@($"Create PO for Taxes")" Disabled=@(!Validated)
                                      MouseEnter="@(args => MainApp.ShowTooltip(args,$"Create PO", TooltipPosition.Top) )" />
                        <RadzenButton Click="@Cancel" Variant="Variant.Flat" ButtonStyle="ButtonStyle.Light" Text="Cancel"
                                      MouseEnter="@(args => MainApp.ShowTooltip(args,$"Cancel", TooltipPosition.Top) )" />

                    </RadzenRow>

                </RadzenColumn>
            </RadzenRow>

        </EditForm>
    </RadzenStack>
}

@code {
    bool debug = true;
    int MaxColumn = 12;
    int MediumColumn = 6;

   
}
