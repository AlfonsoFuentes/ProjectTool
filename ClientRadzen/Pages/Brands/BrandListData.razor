@page "/BrandDatalist"

<RadzenStack Orientation="Orientation.Vertical">

    <RadzenRow>
        <RadzenColumn Size="12" SizeLG="8">
            <RadzenStack Orientation="Orientation.Horizontal">
                <RadzenButton Icon="add" ButtonStyle="ButtonStyle.Light" Size="ButtonSize.Medium" Class="rz-mr-1 rz-ml-4" Click="@(()=>AddNew())" />
                <RadzenButton Icon="home" ButtonStyle="ButtonStyle.Light" Size="ButtonSize.Medium" Class="rz-mr-1 rz-ml-1" Click="@(()=>GoToHome())" />
            </RadzenStack>

        </RadzenColumn>
        <RadzenColumn Size="12" SizeLG="4">
            <RadzenTextBox Class="rz-ml-4" Style="width:100%;" Placeholder="Search..." @bind-Value="@nameFilter" @oninput=@((arg)=>nameFilter=arg.Value!.ToString()!)></RadzenTextBox>
        </RadzenColumn>
    </RadzenRow>

    <RadzenRow>
        <RadzenColumn Size="12" SizeLG="12">
            <RadzenDataList AllowVirtualization=true Style="height:450px;overflow:auto;"
                            WrapItems="false" AllowPaging="false" Density="Density.Compact"
                            Data="@FilteredItems" TItem="BrandResponse" PageSize="5" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true">

                <Template Context="detail">

                    <RadzenRow Gap="0">
                        <RadzenColumn Size="12" SizeLG="2">

                            @if (!(EditRow && detail == selectedRow))
                            {

                                <RadzenText TextStyle="TextStyle.Body1" TagName="TagName.H5" Class="rz-color-primary" Style="width:100%;"
                                            @onclick="@(()=>OnClick(detail))"
                                            @ondblclick="@(()=>OnDoubleClick(detail))">@(detail.Name)</RadzenText>
                            }
                            else
                            {
                                <RadzenFormField Text="Brand Name" Style="width:100%;">
                                    <RadzenTextBox @bind-Value=@detail.Name  class="rz-mr-4"
                                                   @oninput="@((arg)=>detail.Name=arg.Value!.ToString()!)"
                                                   @onkeydown="@((arg)=>OnKeyDown(arg,detail))"></RadzenTextBox>
                                </RadzenFormField>

                            }

                        </RadzenColumn>
                        <RadzenColumn Size="12" SizeLG="8">
                            <RadzenRow Gap="0" class="rz-ml-2">
                                @if (CurrentUser.IsSuperAdmin)
                                {
                                    <RadzenColumn Size="12" SizeMD="6" SizeLG="8">
                                        <RadzenText TextStyle="TextStyle.Body1" TagName="TagName.H5" Class="rz-mb-0">Created By</RadzenText>
                                        <RadzenText TextStyle="TextStyle.Body2">@(detail.CreatedBy)</RadzenText>
                                    </RadzenColumn>
                                    <RadzenColumn Size="12" SizeMD="6" SizeLG="4">
                                        <RadzenText TextStyle="TextStyle.Body1" TagName="TagName.H5" Class="rz-mb-0">Created Date</RadzenText>
                                        <RadzenText TextStyle="TextStyle.Body2">@(detail.CreatedOn)</RadzenText>
                                    </RadzenColumn>

                                }

                            </RadzenRow>
                        </RadzenColumn>
                        <RadzenColumn Size="12" SizeLG="2" Style="height:auto">
                            <RadzenStack Orientation="Orientation.Horizontal" Gap="2">
                                @if (EditRow && detail == selectedRow)
                                {
                                    <RadzenButton Icon="save" ButtonStyle="ButtonStyle.Light" Size="ButtonSize.Medium" class="rz-mr-1" Click="@(()=>SaveAsync(detail))" />
                                    <RadzenButton Icon="cancel" ButtonStyle="ButtonStyle.Light" Size="ButtonSize.Medium" class="rz-ml-2" Click="@(()=>CancelAsync())" />
                                }
                                else
                                {
                                    <RadzenButton Icon="edit" ButtonStyle="ButtonStyle.Light" Size="ButtonSize.Medium" class="rz-mr-1" Click="@(()=>Edit(detail))" />
                                    <RadzenButton Icon="delete" ButtonStyle="ButtonStyle.Light" Size="ButtonSize.Medium" class="rz-ml-2" Click="@(()=>Delete(detail))" />
                                }
                            </RadzenStack>

                        </RadzenColumn>
                    </RadzenRow>


                </Template>
            </RadzenDataList>
        </RadzenColumn>
    </RadzenRow>




</RadzenStack>


@code {
    bool allowVirtualization = true;

   
    void NotifyMessage(NotificationSeverity Severity, string Leyend, List<string> messages)
    {
        AlertStyle alertStyle = Severity == NotificationSeverity.Success ? AlertStyle.Success : AlertStyle.Danger;

        NotificationService.Notify(new NotificationMessage
            {
                Severity = Severity,
                SummaryContent = ns =>@<RadzenText TextStyle="TextStyle.H6">@Leyend</RadzenText>,
            DetailContent = ns =>@<SimpleAlertMessage AlertStyle="@alertStyle" Messages=@messages></SimpleAlertMessage>,


            Duration = Severity == NotificationSeverity.Success ? 2000 : 4000,
        });

    }
}
