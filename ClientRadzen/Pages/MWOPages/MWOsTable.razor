@page "/mwotable"


<RadzenStack Orientation="Orientation.Vertical">



    <RadzenStack Orientation="Orientation.Horizontal">
        <RadzenButton ButtonStyle="ButtonStyle.Primary" class="mt-2 mb-4" Text="Add New" Click="@AddNewMWO" />
        <RadzenButton ButtonStyle="ButtonStyle.Primary" class="mt-2 mb-4" Text="Edit" Click="@(()=>Edit(selectedRow))" Disabled=@(selectedRow==null) />
        <RadzenButton ButtonStyle="ButtonStyle.Primary" class="mt-2 mb-4" Text="Delete" Click="@(()=>Delete(selectedRow))" Disabled=@(selectedRow==null) />
        <RadzenButton ButtonStyle="ButtonStyle.Primary" class="mt-2 mb-4" Text="Budget Items" Click="@(()=>ShowBudgetItems(selectedRow))" Disabled=@(selectedRow==null) />
    </RadzenStack>
  


    <RadzenDataGrid @ref="grid" AllowFiltering="true" AllowColumnResize="true" AllowAlternatingRows="false" FilterMode="FilterMode.Advanced"
                    AllowGrouping="true" AllowSorting="true" PageSize="50" AllowPaging="true" PagerHorizontalAlign="HorizontalAlign.Left"
                    Density="Density.Default" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" FilterCleared=@FilterCleared
                    FilterPopupRenderMode="PopupRenderMode.OnDemand" SelectionMode="DataGridSelectionMode.Single" @bind-Value=@selectedMWOs RowClick=OnRowClick
                    Data="@FilteredItems" TItem="MWOResponse" ColumnWidth="300px" LogicalFilterOperator="LogicalFilterOperator.Or" ShowPagingSummary="true">
        <Columns>
            <RadzenDataGridColumn TItem="MWOResponse" Property="@nameof(MWOResponse.Name)" Filterable="false" Title="Name" Frozen="false" Width="100px"
                                  TextAlign="TextAlign.Left" Groupable=false />
            <RadzenDataGridColumn TItem="MWOResponse" Property="@nameof(MWOResponse.Type)" Title="Type" Frozen="false"
                                  Width="80px" TextAlign="TextAlign.Center" Type="typeof(IEnumerable<string>)" LogicalFilterOperator=LogicalFilterOperator.Or
                                  FilterValue="@selectedTypes" FilterOperator="FilterOperator.Contains">
                <FilterValueTemplate>
                    <RadzenDropDown @bind-Value=@selectedTypes Style="width:100%"
                                    Change=@OnSelectedTypesChange Data="@(titles)" AllowClear="true" Multiple="true" />
                </FilterValueTemplate>


            </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="MWOResponse" Property="@nameof(MWOResponse.Status)" Title="Status" Frozen="true" Width="80px" />
            @if (CurrentUser.IsSuperAdmin)
            {
                <RadzenDataGridColumn TItem="MWOResponse" Property="@nameof(MWOResponse.CreatedBy)" Filterable="false" Title="Created By" Frozen="false" Width="100px"
                                      TextAlign="TextAlign.Left" Groupable=false />
                <RadzenDataGridColumn TItem="MWOResponse" Property="@nameof(MWOResponse.CreatedOn)" Filterable="false" Title="Created On" Frozen="false" Width="100px"
                                      TextAlign="TextAlign.Left" Groupable=false />

            }
        </Columns>
    </RadzenDataGrid>
</RadzenStack>
@code {

}
