@page "/NewEditSalaryPurchaseOrder/{PurchaseOrderId:guid}"



<PageTitle>Edit New Purchase Order </PageTitle>
@if (debug)
{

}



@if (Model != null)
{
    <RadzenStack Orientation="Orientation.Vertical">
        <RadzenRow>
            <RadzenText TextStyle="TextStyle.DisplayH5"
                        Text="@($"Edit Capitalized Salary in {Model.PurchaseorderName} ")"></RadzenText>
        </RadzenRow>
        <EditForm Model="@Model" OnValidSubmit="SaveAsync">
            <FluentValidationValidator @ref="_fluentValidationValidator" />
            <RadzenRow>
                <RadzenColumn Size="12" SizeMD="4">
                    <RadzenRow>
                        <RadzenFormField Text="Purchase order Name" Style="width: 100%;">
                            <RadzenTextBox @bind-Value=@Model.PurchaseorderName class="w-100"
                                           @oninput="@((arg)=>ChangeName(arg.Value!.ToString()!))"
                                           Name="name" />

                        </RadzenFormField>
                        <ValidationMessage For="() => Model.PurchaseorderName" style="color:red; font-size:x-small;" />

                    </RadzenRow>
                    <RadzenRow class="rz-mt-2">
                        <RadzenLabel Text="Is Capitalized Salary?" Component="True" />
                        <RadzenSwitch @bind-Value=@Model.CreatePurchaseOrderNumber
                                      InputAttributes="@(new Dictionary<string,object>(){ { "aria-label", "Switch value" }})"></RadzenSwitch>
                        @if (Model.CreatePurchaseOrderNumber)
                        {
                            <RadzenFormField Text="PO Number" Style="width: 100%;">

                                <RadzenTextBox Value=@Model.PurchaseOrderNumber class="w-100" Style="width: 100%;"
                                               Name="ponumber" @oninput="@((arg)=>ChangePONumber(arg.Value!.ToString()!))" />
                            </RadzenFormField>
                            <ValidationMessage For="() => Model.PurchaseOrderNumber" style="color:red; font-size:x-small;" />
                        }

                    </RadzenRow>
                    <RadzenRow>
                        <RadzenFormField Text="MWO" Style="width: 100%;">

                            <RadzenTextBox Value=@Model.MWOCECName class="w-100" Style="width: 100%;"
                                           Name="account" Disabled=true />
                        </RadzenFormField>
                    </RadzenRow>


                    <RadzenRow>
                        <RadzenFormField Text="PO Value, USD" Style="width: 100%;">
                            <RadzenNumeric ShowUpDown=false @bind-Value=@PurchaseOrderItem.UnitaryValueCurrency
                                           @oninput="@((arg)=>ChangeCurrencyValue(PurchaseOrderItem, arg.Value!.ToString()!))"></RadzenNumeric>

                        </RadzenFormField>
                        <ValidationMessage For="() => Model.POValueUSD" style="color:red; font-size:x-small;" />
                    </RadzenRow>

                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="4">
                    <RadzenCard>

                        <RadzenRow class="rz-mt-2">
                            <RadzenColumn Size="12" SizeMD="12">
                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">Budget, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.TotalBudgetUSD)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>
                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">Assigned, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.NewTotalAssignedUSD)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>
                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">PO Value, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.POValueUSD)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>
                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">Actual, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.ActualUSD)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>


                                <RadzenRow Style="width:100%" JustifyContent="JustifyContent.SpaceBetween">
                                    <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.H5" Class="rz-mb-0">Pending, $USD</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Caption">
                                        <b>
                                            @($"{String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C0}", Model.NewTotalPendingToCommitUSD)}")
                                        </b>
                                    </RadzenText>

                                </RadzenRow>


                            </RadzenColumn>

                        </RadzenRow>

                    </RadzenCard>

                </RadzenColumn>
            </RadzenRow>
            <RadzenRow class="rz-mt-2">
                <RadzenColumn Size="12" SizeMD="4">
                    <RadzenRow JustifyContent="JustifyContent.SpaceBetween">
                        <RadzenButton Click="@SaveAsync" Variant="Variant.Flat" Text="@($"Edit PO For Salary")" Disabled=@(!Validated)
                                      MouseEnter="@(args => MainApp.ShowTooltip(args,$"Edit PO", TooltipPosition.Top) )" />
                        <RadzenButton Click="@Cancel" Variant="Variant.Flat" ButtonStyle="ButtonStyle.Light" Text="Cancel"
                                      MouseEnter="@(args => MainApp.ShowTooltip(args,$"Cancel", TooltipPosition.Top) )" />

                    </RadzenRow>

                </RadzenColumn>
            </RadzenRow>

        </EditForm>
    </RadzenStack>
}




@code {


    bool debug = true;
    int MaxColumn = 12;
    int MediumColumn = 6;


}
